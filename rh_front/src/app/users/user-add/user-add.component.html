<!-- Main Content -->
<div class="main-content">
  <div class="page-header">
    <h1 class="page-title">
      <button class="back-btn" routerLink="/users">‚Üê</button>
      Add New User
    </h1>
  </div>

  <form class="form-container" id="addUserForm" #adduserform="ngForm" (ngSubmit)="onSubmit(adduserform)">
    <!-- Basic Information Section -->
    <div class="form-section">
      <div class="section-header">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        Basic Information
      </div>

      <div class="avatar-upload">
        <div class="avatar-preview">
          @if (!avatarPreview) {
          <div class="avatar-placeholder">üë§</div>
          }
          @if(avatarPreview){
          <img [src]="avatarPreview" id="avatarPreview"
            style="width: 64px; height: 64px; border-radius: 50%; object-fit: cover;" />
          }
        </div>
        <label class="upload-btn">
          Upload Photo
          <input type="file" id="avatarUpload" accept="image/*" style="display: none;" (change)="onFileSelected($event)"
            name="photo">
        </label>
      </div>

      <div class="form-grid">
        <div class="form-group">
          <label for="firstName">First Name *</label>
          <input type="text" id="firstName" class="form-control" required name="firstName" [(ngModel)]="user.firstName"
            #firstName="ngModel">
          @if(firstName.invalid && firstName.touched){
          <div class="text-danger">First name is required.</div>
          }
        </div>

        <div class="form-group">
          <label for="lastName">Last Name *</label>
          <input type="text" id="lastName" class="form-control" required name="lastName" [(ngModel)]="user.lastName"
            #lastName="ngModel">
          @if(lastName.invalid && lastName.touched) {
          <div class="text-danger">Last name is required.</div>
          }
        </div>

        <div class="form-group">
          <label for="email">Email Address *</label>
          <input type="email" id="email" class="form-control" required name="email" [(ngModel)]="user.email"
            #email="ngModel">
          @if(email.invalid && email.touched){
          <div class="text-danger">Valid email is required.</div>
          }
        </div>

        <div class="form-group">
          <label for="phone">Phone Number</label>
          <input type="tel" id="phone" class="form-control" name="phone" [(ngModel)]="user.phone">
        </div>
      </div>

      <div class="form-grid">
        <div class="form-group">
          <label for="password">Password *</label>
          <input type="password" id="password" class="form-control" required name="password" [(ngModel)]="user.password"
            #password="ngModel">
          @if (password.invalid && password.touched) {
          <div class="text-danger">Password is required.</div>

          }
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirm Password *</label>
          <input type="password" id="confirmPassword" class="form-control" required name="confirmPassword"
            [(ngModel)]="user.confirmPassword" #confirmPassword="ngModel">
          @if (confirmPassword.invalid && confirmPassword.touched) {
          <div class="text-danger">Confirmation is required.
          </div>
          }
          @if(user.password && user.confirmPassword && user.password !== user.confirmPassword){
          <div class="text-danger">Passwords do not match.</div>
          }
        </div>
      </div>
    </div>

    <!-- Form Actions -->
    <div class="form-actions">
      <button type="button" class="btn btn-secondary">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
        Cancel
      </button>
      <button type="submit" class="btn btn-primary">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
          <polyline points="17 21 17 13 7 13 7 21"></polyline>
          <polyline points="7 3 7 8 15 8"></polyline>
        </svg>
        Save User
      </button>
    </div>
  </form>
</div>